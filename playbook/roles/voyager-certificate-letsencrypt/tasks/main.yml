- name: Ensure Voyager ACME Credentials
  k8s:
    state: present
    definition: "{{ lookup('template', 'voyager-acme-account.yml') }}"

- name: Ensure Voyager Let's Encrypt Certificate
  k8s:
    state: present
    definition: "{{ lookup('template', 'voyager-certificate.yml') }}"
  when: voyager_letsencrypt_challenge == 'dns'

- name: Ensure Voyager Let's Encrypt API Certificate
  k8s:
    state: present
    definition: "{{ lookup('template', 'voyager-certificate-api-http.yml') }}"
  when: voyager_letsencrypt_challenge == 'http'

- name: Ensure Voyager Let's Encrypt Broker Certificate
  k8s:
    state: present
    definition: "{{ lookup('template', 'voyager-certificate-broker-http.yml') }}"
  when: voyager_letsencrypt_challenge == 'http'
